---
apiVersion: external-secrets.io/v1beta1
kind: ClusterExternalSecret
metadata:
  name: prod-artifact-registry-external-secret
  namespace: default
spec:
  namespaceSelector:
    matchLabels:
      cluster-secret.home.arpa/prod-artifact-registry: "true"
  externalSecretSpec:
    secretStoreRef:
      kind: ClusterSecretStore
      name: onepassword-connect
    target:
      name: prod-artifact-registry-secret
      creationPolicy: Owner
      template:
        type: kubernetes.io/dockerconfigjson
    dataFrom:
      - extract:
          key: prod-artifact-registry-secret
